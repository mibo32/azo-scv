# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

trigger:
- main

pool:
  vmImage: ubuntu-latest

steps:
- script: echo Hello, world!
  displayName: 'Run a one-line script'

- task: HelmInstaller@0
  inputs:
    helmVersion: '3.x'
    installKubectl: true

- script: |
    helm repo add kubereboot https://kubereboot.github.io/charts
    helm repo update 
    echo "___________RESULTS1_____________________"
    helm repo pull kubereboot/cured
    echo "___________RESULTS2_____________________"
    $folder= pwd
    docker run --tty --volume $folder:/tf --workdir /tf bridgecrew/checkov --directory /tf
    echo "___________RESULTS3_____________________"
    ls -a
  displayName: 'Run a multi-line script'
